generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Developer {
  id          Int          @id @default(autoincrement())
  name        String
  edrpou      String
  professions Profession[]
}

model Profession {
  id                         Int                         @id @default(autoincrement())
  name                       String
  code                       String
  developerId                Int
  approvalDate               DateTime
  developer                  Developer                   @relation(fields: [developerId], references: [id])
  professionalQualifications ProfessionalQualification[]
}

model ProfessionalQualification {
  id             Int             @id @default(autoincrement())
  name           String
  nkrLevel       Int
  professionId   Int
  profession     Profession      @relation(fields: [professionId], references: [id])
  accreditations Accreditation[]
  persons        Person[]
  experts        Expert[]
  examinations   Examination[]
}

model QualificationCenter {
  id             Int             @id @default(autoincrement())
  name           String
  edrpou         String
  address        String
  accreditations Accreditation[]
  persons        Person[]
  examinations   Examination[]
}

model Accreditation {
  id                          Int                       @id @default(autoincrement())
  professionalQualificationId Int
  qualificationCenterId       Int
  certificateNumber           String
  hakDate                     DateTime
  professionalQualification   ProfessionalQualification @relation(fields: [professionalQualificationId], references: [id])
  qualificationCenter         QualificationCenter       @relation(fields: [qualificationCenterId], references: [id])
}

model Person {
  id                          Int                       @id @default(autoincrement())
  fullName                    String
  qualificationCenterId       Int
  professionalQualificationId Int
  certificateNumber           String
  dateReceived                DateTime
  qualificationCenter         QualificationCenter       @relation(fields: [qualificationCenterId], references: [id])
  professionalQualification   ProfessionalQualification @relation(fields: [professionalQualificationId], references: [id])
}

model Expert {
  id                          Int                       @id @default(autoincrement())
  fullName                    String
  professionalQualificationId Int
  professionalQualification   ProfessionalQualification @relation(fields: [professionalQualificationId], references: [id])
  examinations                Examination[]
}

model Examination {
  id                          Int                       @id @default(autoincrement())
  professionalQualificationId Int
  qualificationCenterId       Int
  expertId                    Int
  examinationDate             DateTime
  professionalQualification   ProfessionalQualification @relation(fields: [professionalQualificationId], references: [id])
  qualificationCenter         QualificationCenter       @relation(fields: [qualificationCenterId], references: [id])
  expert                      Expert                    @relation(fields: [expertId], references: [id])
}
